我是系统分析师。根据前期的需求调研与业务建模，我为您整理了详细的《校医院智能候诊系统功能清单》。

这份清单采用分层结构设计，详细描述了每一项功能的系统行为、业务规则及数据逻辑，可直接作为 **SRS（需求规格说明书）** 的核心素材。

---

### 1. 学生端 (Student Client)
*主要载体：微信小程序或医院App*

#### **1.1 自助报到模块**
*   **1.1.1 扫码签到 (QR Code Check-in)**
    *   **功能描述：** 提供基于地理位置校验的扫码入队功能。
    *   **系统行为：**
        1.  识别科室门口的静态二维码，解析科室ID。
        2.  调用后台接口验证学生身份及**当日挂号记录**。
        3.  验证通过后，将学生状态由“已挂号”更新为“候诊中”。
        4.  将学生追加至该科室的候诊队列末尾，生成排队序号。
    *   **异常处理：** 若无挂号记录或不在服务时间，弹出错误提示。

#### **1.2 进度追踪模块**
*   **1.2.1 实时排队查询 (Real-time Queue Status)**
    *   **功能描述：** 展示可视化的排队面板。
    *   **系统行为：**
        1.  显示学生当前的**排队序号**（如：内科 A015）。
        2.  动态计算并显示**前方等待人数**（计算公式：当前队列中排在该学生前面的总人数）。
        3.  显示当前正在就诊的号码，辅助学生预估时间。
*   **1.2.2 就诊通知接收 (Call Notification)**
    *   **功能描述：** 接收系统的被动消息推送。
    *   **系统行为：** 当医生点击“叫号”时，学生端立即弹出高优先级通知：“请 A015 号张三到 3 号诊室就诊”。

---

### 2. 医生端 (Doctor Workstation)
*主要载体：桌面客户端或Web端*

#### **2.1 诊疗排队模块**
*   **2.1.1 待诊池监控 (Waiting Pool Monitor)**
    *   **功能描述：** 实时展示本可科室的候诊学生概况。
    *   **系统行为：**
        1.  以列表形式展示已扫码签到的学生（姓名、挂号序号、等待时长）。
        2.  支持自动刷新，确保医生看到的是最新的积压情况。
*   **2.1.2 智能叫号 (Smart Call / Auto-Assign)**
    *   **功能描述：** 核心功能，触发叫号流程并分配病人。
    *   **系统行为：**
        1.  锁定科室候诊队列中的**队首**学生（确保无并发冲突）。
        2.  **执行自动分配逻辑：** 将该学生与当前点击按钮的医生/诊室进行绑定。
        3.  将学生状态更新为“就诊中/呼叫中”。
        4.  向外部接口（走廊大屏、语音广播、学生手机）发送呼叫指令。
*   **2.1.3 再次呼叫 (Recall)**
    *   **功能描述：** 应对学生未听到的情况。
    *   **系统行为：** 不改变队列位置，仅重复触发语音广播和屏幕闪烁提醒。

#### **2.2 异常处理模块**
*   **2.2.1 标记过号 (Mark as Missed)**
    *   **功能描述：** 处理呼叫后未到场的僵尸节点。
    *   **系统行为：**
        1.  将当前呼叫的学生状态由“呼叫中”更新为**“过号（Missed）”**。
        2.  将该学生从“活跃候诊队列”中移除（不再阻塞后续病人）。
        3.  系统自动弹窗提示“是否立即呼叫下一位？”。

---

### 3. 护士端 (Triage Management)
*主要载体：分诊台管理端*

#### **3.1 纠纷与异常管理模块**
*   **3.1.1 过号重排 (Missed Call Recovery)**
    *   **功能描述：** 激活过号学生并按特定规则重新插入队列。
    *   **系统行为：**
        1.  支持通过学号或姓名搜索状态为“过号”的学生。
        2.  **执行顺延算法：** 获取当前正在呼叫的序号 $N$。
        3.  计算插入位置 $Position = N + 3$。
        4.  将学生状态恢复为“候诊中”，并插入到计算出的特定位置（若队列长度不足3，则插入队尾）。
*   **3.1.2 人工调整队列 (Manual Adjustment)**
    *   **功能描述：** 应对急诊或特殊优待情况。
    *   **系统行为：** 允许护士手动将某位学生置顶（优先就诊），需记录操作日志及原因。

#### **3.2 资源调度模块**
*   **3.2.1 医生状态维护 (Doctor Status Management)**
    *   **功能描述：** 动态控制医生的接诊能力。
    *   **系统行为：**
        1.  提供状态切换开关：在线（正常接诊）、暂停（开会/休息）、离线（下班）。
        2.  **逻辑关联：** 当状态设为“暂停”或“离线”时，系统将不再向该医生自动分配新病人，但已分配的病人不受影响。
*   **3.2.2 科室信息配置 (Department Configuration)**
    *   **功能描述：** 维护科室基础属性。
    *   **系统行为：** 支持修改科室名称（如“内科”改“发热门诊”）、位置信息、默认叫号前缀（如“A”、“B”）等。