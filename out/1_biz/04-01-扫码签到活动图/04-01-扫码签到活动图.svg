<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="747px" preserveAspectRatio="none" style="width:1228px;height:747px;" version="1.1" viewBox="0 0 1228 747" width="1228px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qnw6krud12v5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="218" x="504.25" y="30.6279">BUC01 - 扫码签到业务流程</text><rect fill="#E1F5FE" height="693.0811" style="stroke:#E1F5FE;stroke-width:1.0;" width="333.5" x="15" y="37.0381"/><ellipse cx="250.5" cy="76.6211" fill="#000000" filter="url(#f1qnw6krud12v5)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="160" x="170.5" y="106.6211"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="180.5" y="130.373">扫描科室门口“签到二维码”</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="170" x="21" y="407.5645"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="150" x="31" y="431.3164">显示错误: 请前往自助机挂号</text><ellipse cx="106" cy="489.9531" fill="#FFFFFF" filter="url(#f1qnw6krud12v5)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="106" cy="489.9531" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="176" x="162.5" y="651.7305"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156" x="172.5" y="675.4824">接收通知并查看当前排队进度</text><ellipse cx="250.5" cy="719.1191" fill="#FFFFFF" filter="url(#f1qnw6krud12v5)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="250.5" cy="719.1191" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="15" x2="15" y1="37.0381" y2="730.1191"/><rect fill="#F5F5F5" height="693.0811" style="stroke:#F5F5F5;stroke-width:1.0;" width="310.5" x="348.5" y="37.0381"/><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="176" x="473" y="163.0098"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156" x="483" y="186.7617">请求获取地理位置及身份信息</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="151" x="485.5" y="219.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="131" x="495.5" y="243.1504">校验位置有效性 (防作弊)</text><polygon fill="#FEFECE" filter="url(#f1qnw6krud12v5)" points="497.5,275.7871,624.5,275.7871,636.5,287.7871,624.5,299.7871,497.5,299.7871,485.5,287.7871,497.5,275.7871" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="497.5" y="292.8816">是否存在当日有效挂号单?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="474.5" y="285.3701">否</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="636.5" y="285.3701">是</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="52.7773" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="124" x="354.5" y="319.7871"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="364.5" y="343.5391">生成错误提示</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="364.5" y="359.9277">"未查询到挂号信息"</text><line style="stroke:#000000;stroke-width:2.0;" x1="348.5" x2="348.5" y1="37.0381" y2="730.1191"/><polygon fill="#FEFECE" filter="url(#f1qnw6krud12v5)" points="786.5,319.7871,891.5,319.7871,903.5,331.7871,891.5,343.7871,786.5,343.7871,774.5,331.7871,786.5,319.7871" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="105" x="786.5" y="336.8816">是否已在候诊队列中?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="763.5" y="329.3701">是</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="903.5" y="329.3701">否</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="52.7773" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="100" x="697" y="353.7871"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="707" y="377.5391">生成提示信息</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="707" y="393.9277">"请勿重复签到"</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="164" x="665" y="441.5645"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="675" y="465.3164">获取当前已存在的排队进度</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="153" x="854.5" y="353.7871"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133" x="864.5" y="377.5391">更新学生状态 -&gt; "候诊中"</text><path d="M1033,425.1758 L1033,452.8074 L1013,456.8074 L1033,460.8074 L1033,488.439 A0,0 0 0 0 1033,488.439 L1204,488.439 A0,0 0 0 0 1204,488.439 L1204,435.1758 L1194,425.1758 L1033,425.1758 A0,0 0 0 0 1033,425.1758 " fill="#FBFB77" filter="url(#f1qnw6krud12v5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1194,425.1758 L1194,435.1758 L1204,435.1758 L1194,425.1758 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70" x="1039" y="445.0737">业务规则：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1039" y="462.8281">入队时间决定初始顺序</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1039" y="480.5825">生成排队号码 (e.g., A015)</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="164" x="849" y="438.613"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="859" y="462.365">将学生对象追加到队列末尾</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="116" x="873" y="520.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="883" y="544.7051">计算前方等待人数</text><rect fill="#FEFECE" filter="url(#f1qnw6krud12v5)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="160" x="851" y="577.3418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="861" y="601.0938">生成“签到成功”及排队信息</text><line style="stroke:#000000;stroke-width:2.0;" x1="659" x2="659" y1="37.0381" y2="730.1191"/><line style="stroke:#000000;stroke-width:2.0;" x1="1209" x2="1209" y1="37.0381" y2="730.1191"/><line style="stroke:#A80036;stroke-width:1.5;" x1="250.5" x2="250.5" y1="86.6211" y2="106.6211"/><polygon fill="#A80036" points="246.5,96.6211,250.5,106.6211,254.5,96.6211,250.5,100.6211" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="106" x2="106" y1="443.9531" y2="478.9531"/><polygon fill="#A80036" points="102,468.9531,106,478.9531,110,468.9531,106,472.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="250.5" x2="250.5" y1="688.1191" y2="708.1191"/><polygon fill="#A80036" points="246.5,698.1191,250.5,708.1191,254.5,698.1191,250.5,702.1191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="561" x2="561" y1="199.3984" y2="219.3984"/><polygon fill="#A80036" points="557,209.3984,561,219.3984,565,209.3984,561,213.3984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="485.5" x2="416.5" y1="287.7871" y2="287.7871"/><line style="stroke:#A80036;stroke-width:1.5;" x1="416.5" x2="416.5" y1="287.7871" y2="319.7871"/><polygon fill="#A80036" points="412.5,309.7871,416.5,319.7871,420.5,309.7871,416.5,313.7871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="561" x2="561" y1="255.7871" y2="275.7871"/><polygon fill="#A80036" points="557,265.7871,561,275.7871,565,265.7871,561,269.7871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="747" x2="747" y1="406.5645" y2="441.5645"/><polygon fill="#A80036" points="743,431.5645,747,441.5645,751,431.5645,747,435.5645" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="931" x2="931" y1="390.1758" y2="438.613"/><polygon fill="#A80036" points="927,428.613,931,438.613,935,428.613,931,432.613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="931" x2="931" y1="475.0017" y2="520.9531"/><polygon fill="#A80036" points="927,510.9531,931,520.9531,935,510.9531,931,514.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="931" x2="931" y1="557.3418" y2="577.3418"/><polygon fill="#A80036" points="927,567.3418,931,577.3418,935,567.3418,931,571.3418" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="774.5" x2="747" y1="331.7871" y2="331.7871"/><line style="stroke:#A80036;stroke-width:1.5;" x1="747" x2="747" y1="331.7871" y2="353.7871"/><polygon fill="#A80036" points="743,343.7871,747,353.7871,751,343.7871,747,347.7871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="903.5" x2="931" y1="331.7871" y2="331.7871"/><line style="stroke:#A80036;stroke-width:1.5;" x1="931" x2="931" y1="331.7871" y2="353.7871"/><polygon fill="#A80036" points="927,343.7871,931,353.7871,935,343.7871,931,347.7871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="747" x2="747" y1="477.9531" y2="631.7305"/><polygon fill="#A80036" points="743,621.7305,747,631.7305,751,621.7305,747,625.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="931" x2="931" y1="613.7305" y2="631.7305"/><polygon fill="#A80036" points="927,621.7305,931,631.7305,935,621.7305,931,625.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="747" x2="931" y1="631.7305" y2="631.7305"/><line style="stroke:#A80036;stroke-width:1.5;" x1="250.5" x2="250.5" y1="143.0098" y2="148.0098"/><line style="stroke:#A80036;stroke-width:1.5;" x1="250.5" x2="561" y1="148.0098" y2="148.0098"/><line style="stroke:#A80036;stroke-width:1.5;" x1="561" x2="561" y1="148.0098" y2="163.0098"/><polygon fill="#A80036" points="557,153.0098,561,163.0098,565,153.0098,561,157.0098" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="416.5" x2="416.5" y1="372.5645" y2="390.0645"/><line style="stroke:#A80036;stroke-width:1.5;" x1="416.5" x2="106" y1="390.0645" y2="390.0645"/><line style="stroke:#A80036;stroke-width:1.5;" x1="106" x2="106" y1="390.0645" y2="407.5645"/><polygon fill="#A80036" points="102,397.5645,106,407.5645,110,397.5645,106,401.5645" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="636.5" x2="839" y1="287.7871" y2="287.7871"/><line style="stroke:#A80036;stroke-width:1.5;" x1="839" x2="839" y1="287.7871" y2="319.7871"/><polygon fill="#A80036" points="835,309.7871,839,319.7871,843,309.7871,839,313.7871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="839" x2="839" y1="631.7305" y2="636.7305"/><line style="stroke:#A80036;stroke-width:1.5;" x1="839" x2="250.5" y1="636.7305" y2="636.7305"/><line style="stroke:#A80036;stroke-width:1.5;" x1="250.5" x2="250.5" y1="636.7305" y2="651.7305"/><polygon fill="#A80036" points="246.5,641.7305,250.5,651.7305,254.5,641.7305,250.5,645.7305" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="36" x="163.75" y="57.666">学生</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="36" x="485.75" y="57.666">系统</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="59" x="904.5" y="57.666">System</text><!--MD5=[466092c99ddef388ee6fb7e2b65318d0]
@startuml
title BUC01 - 扫码签到业务流程
skinparam ActivityBackgroundColor #FEFECE
skinparam ActivityBorderColor #A80036
skinparam ConditionEndStyle hline

|#E1F5FE|学生|
start
:扫描科室门口“签到二维码”;

|#F5F5F5|系统|
:请求获取地理位置及身份信息;
:校验位置有效性 (防作弊);

if (是否存在当日有效挂号单?) then (否)
    :生成错误提示\n"未查询到挂号信息";
    |学生|
    :显示错误: 请前往自助机挂号;
    stop
else (是)
    |System|
    if (是否已在候诊队列中?) then (是)
        :生成提示信息\n"请勿重复签到";
        :获取当前已存在的排队进度;
    else (否)
        :更新学生状态 -> "候诊中";
        :将学生对象追加到队列末尾;
        note right
            <b>业务规则：</b>
            入队时间决定初始顺序
            生成排队号码 (e.g., A015)
        end note
        :计算前方等待人数;
        :生成“签到成功”及排队信息;
    endif
endif

|学生|
:接收通知并查看当前排队进度;
stop

@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 CST 2021)
(MIT source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>